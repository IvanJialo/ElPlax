<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Asignar Alumnos a Empresas</title>
    <link rel="stylesheet" href="../style/relaciones.css">
    <script defer src="../script/relaciones.js"></script>
</head>
<body>
    <!-- Botón de Log Off -->
    <div class="logoff-container">
        <a href="../index.html" class="logoff-button">Cerrar Sesión</a>
    </div>

    <aside>
        <a href="./home.html" id="home-link">Home</a>
        <a href="./alumnos.html" id="alumn-link">Creación de Alumnos</a>
        <a href="./empresas.html" id="client-link">Creación de Empresas</a>
        <a href="./relaciones.html" id="relation-link">Crear Asignaciones</a>
        <a href="./informacion.html" id="information-link">Consultar Base de Datos</a>
    </aside>

    <main>
        <h1>Asignación</h1>
        <section id="assign-form-container">
            <form id="assign-form">
                <label for="student-select">Seleccionar Alumno:</label>
                <input type="text" name="student" id="student-select" list="student-list" placeholder="--Selecciona un alumno--">
                <datalist id="student-list">
                    <script>
                        document.addEventListener("DOMContentLoaded", function() {
                            fetch('http://localhost:3000/estudiantes')
                                .then(response => response.json())
                                .then(data => {
                                    const studentList = document.getElementById('student-list');
                                    data.forEach(estudiante => {
                                        const option = document.createElement('option');
                                        option.value = `${estudiante.nombre} ${estudiante.apellido}`;
                                        studentList.appendChild(option);
                                    });
                                })
                                .catch(err => console.error('Error al obtener estudiantes:', err));
                        });
                    </script>
                </datalist>

                <label for="company-select">Seleccionar Empresa:</label>
                <input type="text" name="company" id="company-select" list="company-list" placeholder="--Selecciona una empresa--">
                <datalist id="company-list">
                    <script>
                        document.addEventListener("DOMContentLoaded", function() {
                            fetch('http://localhost:3000/empresas')
                                .then(response => response.json())
                                .then(data => {
                                    const companyList = document.getElementById('company-list');
                                    data.forEach(empresa => {
                                        const option = document.createElement('option');
                                        option.value = empresa.nombre_empresa;
                                        companyList.appendChild(option);
                                    });
                                });
                        });
                    </script>
                </datalist>

                <label for="start-date">Fecha de inicio:</label>
                <input type="text" id="start-date" name="starting_date" placeholder="YYYY/MM/DD" required>

                <button type="submit" id="assign-button">Asignar</button>
            </form>
        </section>
    </main>
</body>
</html>
